/*
 * Copyright (c) 2011  Timo Savola
 *
 * This library is free software; you can redistribute it and/or
 * modify it under the terms of the GNU Lesser General Public
 * License as published by the Free Software Foundation; either
 * version 2.1 of the License, or (at your option) any later version.
 */

package concrete.android;

import android.app.Activity;
import android.os.Bundle;

public class Act extends Activity {
	private native int execute(byte[] bytecode);

	static {
		System.loadLibrary("concrete-android");
	}

	@Override
	public void onCreate(Bundle savedInstanceState)
	{
		super.onCreate(savedInstanceState);
		setContentView(R.layout.main);

		// concrete.git/example/example.py
		byte[] bytecode = new byte[] {
			79, 12, 13, 10, -81, 89, 72, 77, 99, 0, 0, 0, 0, 0, 0,
			0, 0, 0, 0, 0, 0, 7, 0, 0, 0, 64, 0, 0, 0, 115, 90, 0,
			0, 0, 100, 0, 0, 100, 1, 0, 108, 0, 0, 90, 0, 0, 100,
			2, 0, -124, 0, 0, 90, 1, 0, 100, 3, 0, -124, 0, 0, 90,
			2, 0, 100, 4, 0, 90, 3, 0, 101, 1, 0, -125, 0, 0, 101,
			2, 0, 101, 3, 0, -125, 1, 0, 23, 90, 4, 0, 101, 0, 0,
			106, 5, 0, 101, 4, 0, 100, 5, 0, 100, 6, 0, 100, 7, 0,
			100, 8, 0, -125, 1, 2, 100, 9, 0, 23, 90, 4, 0, 100, 1,
			0, 83, 40, 10, 0, 0, 0, 105, 0, 0, 0, 0, 78, 99, 0, 0,
			0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 67, 0, 0, 0,
			115, 4, 0, 0, 0, 100, 1, 0, 83, 40, 2, 0, 0, 0, 78,
			105, 5, 0, 0, 0, 40, 0, 0, 0, 0, 40, 0, 0, 0, 0, 40, 0,
			0, 0, 0, 40, 0, 0, 0, 0, 117, 28, 0, 0, 0, 100, 101,
			98, 117, 103, 47, 111, 98, 106, 47, 101, 120, 97, 109,
			112, 108, 101, 47, 101, 120, 97, 109, 112, 108, 101,
			46, 112, 121, 117, 5, 0, 0, 0, 102, 117, 110, 99, 48,
			3, 0, 0, 0, 115, 2, 0, 0, 0, 0, 1, 99, 1, 0, 0, 0, 0,
			0, 0, 0, 1, 0, 0, 0, 2, 0, 0, 0, 67, 0, 0, 0, 115, 8,
			0, 0, 0, 124, 0, 0, 100, 1, 0, 23, 83, 40, 2, 0, 0, 0,
			78, 105, 2, 0, 0, 0, 40, 0, 0, 0, 0, 40, 1, 0, 0, 0,
			117, 5, 0, 0, 0, 118, 97, 108, 117, 101, 40, 0, 0, 0,
			0, 40, 0, 0, 0, 0, 117, 28, 0, 0, 0, 100, 101, 98, 117,
			103, 47, 111, 98, 106, 47, 101, 120, 97, 109, 112, 108,
			101, 47, 101, 120, 97, 109, 112, 108, 101, 46, 112,
			121, 117, 5, 0, 0, 0, 102, 117, 110, 99, 49, 6, 0, 0,
			0, 115, 2, 0, 0, 0, 0, 1, 105, 10, 0, 0, 0, 117, 3, 0,
			0, 0, 102, 111, 111, 105, 80, 0, 0, 0, 117, 3, 0, 0, 0,
			98, 97, 114, 117, 7, 0, 0, 0, 106, 101, 112, 32, 106,
			101, 112, 105, -24, 3, 0, 0, 40, 6, 0, 0, 0, 117, 8, 0,
			0, 0, 99, 111, 110, 99, 114, 101, 116, 101, 117, 5, 0,
			0, 0, 102, 117, 110, 99, 48, 117, 5, 0, 0, 0, 102, 117,
			110, 99, 49, 117, 1, 0, 0, 0, 120, 117, 1, 0, 0, 0,
			114, 117, 4, 0, 0, 0, 116, 101, 115, 116, 40, 0, 0, 0,
			0, 40, 0, 0, 0, 0, 40, 0, 0, 0, 0, 117, 28, 0, 0, 0,
			100, 101, 98, 117, 103, 47, 111, 98, 106, 47, 101, 120,
			97, 109, 112, 108, 101, 47, 101, 120, 97, 109, 112,
			108, 101, 46, 112, 121, 117, 8, 0, 0, 0, 60, 109, 111,
			100, 117, 108, 101, 62, 1, 0, 0, 0, 115, 10, 0, 0, 0,
			12, 2, 9, 3, 9, 3, 6, 1, 19, 1,
		};

		int value = execute(bytecode);

		setTitle("Value: " + value);
	}
}
